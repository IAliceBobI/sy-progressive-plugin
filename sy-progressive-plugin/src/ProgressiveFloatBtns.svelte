<script lang="ts">
    import DialogSvelte from "../../sy-tomato-plugin/src/libs/DialogSvelte.svelte";
    import { Writable } from "svelte/store";
    import { tomatoI18n } from "../../sy-tomato-plugin/src/tomatoI18n";
    import { getProgressivePluginConfig } from "../../sy-tomato-plugin/src/libs/utils";
    import { prog } from "./Progressive";
    import { HtmlCBType } from "./constants";

    interface PropsType {
        zIndexPlus: Writable<boolean>;
        show: Writable<boolean>;
        title: Writable<string>;
        point: Writable<number>;
        noteID: Writable<string>;
        bookID: Writable<string>;
    }
    let { zIndexPlus, show, title, point, noteID, bookID }: PropsType =
        $props();
</script>

<DialogSvelte
    show={$show}
    title={$title}
    savePositionKey="ProgressiveFloatBtns 2025-07-16 00:06:03"
    isProgressive={true}
    zIndexPlus={$zIndexPlus}
>
    {#snippet dialogInner()}
        <div class="container" title={tomatoI18n.å¦‚æœæ— æ³•æ‹–åŠ¨}>
            <!-- ${btn(HtmlCBType.viewContents, "ğŸ“œ", tomatoI18n.æ‰“å¼€ç›®å½•, bookID, noteID, point, prog.settings.btnViewContents)} -->
            {#if getProgressivePluginConfig().btnViewContents}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.æ‰“å¼€ç›®å½•}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.viewContents,
                            $point,
                        );
                    }}>ğŸ“œ</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.previous, "â¬…", tomatoI18n.ä¸Šä¸€ä¸ªåˆ†ç‰‡, bookID, noteID, point, prog.settings.btnPrevious)} -->
            {#if getProgressivePluginConfig().btnPrevious}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.ä¸Šä¸€ä¸ªåˆ†ç‰‡}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.previous,
                            $point,
                        );
                    }}>â¬…</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.next, "â¡", tomatoI18n.ä¸‹ä¸€ä¸ªåˆ†ç‰‡, bookID, noteID, point, prog.settings.btnNext)} -->
            {#if getProgressivePluginConfig().btnNext}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.ä¸‹ä¸€ä¸ªåˆ†ç‰‡}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.next,
                            $point,
                        );
                    }}>â¡</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.cleanOriginText, "ğŸ§¹", tomatoI18n.åˆ é™¤åŸæ–‡, bookID, noteID, point, prog.settings.btnCleanOriginText)} -->
            {#if getProgressivePluginConfig().btnCleanOriginText}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.åˆ é™¤åŸæ–‡}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.cleanOriginText,
                            $point,
                        );
                    }}>ğŸ§¹</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.fullfilContent, "â¬‡", tomatoI18n.é‡æ–°æ’å…¥åˆ†ç‰‡å†…å®¹, bookID, noteID, point, prog.settings.btnFullfilContent)} -->
            {#if getProgressivePluginConfig().btnFullfilContent}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.é‡æ–°æ’å…¥åˆ†ç‰‡å†…å®¹}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.fullfilContent,
                            $point,
                        );
                    }}>â¬‡</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.quit, "ğŸ•º", tomatoI18n.å…³é—­åˆ†ç‰‡, bookID, noteID, point, prog.settings.btnStop)} -->
            {#if getProgressivePluginConfig().btnStop}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.å…³é—­åˆ†ç‰‡}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.quit,
                            $point,
                        );
                    }}>ğŸ•º</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.nextBook, "ğŸ“šğŸ“–", tomatoI18n.æ¢ä¸€æœ¬ä¹¦çœ‹, bookID, noteID, point, prog.settings.btnNextBook)} -->
            {#if getProgressivePluginConfig().btnNextBook}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.æ¢ä¸€æœ¬ä¹¦çœ‹}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.nextBook,
                            $point,
                        );
                    }}>ğŸ“šğŸ“–</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.openFlashcardTab, "âš¡", tomatoI18n.æ‰“å¼€æœ¬ä¹¦çš„é—ªå¡, bookID, noteID, point, prog.settings.btnOpenFlashcardTab)} -->
            {#if getProgressivePluginConfig().btnOpenFlashcardTab}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.æ‰“å¼€æœ¬ä¹¦çš„é—ªå¡}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.openFlashcardTab,
                            $point,
                        );
                    }}>âš¡</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.deleteAndBack, "â¬…ğŸ—‘", tomatoI18n.åˆ é™¤åˆ†ç‰‡çœ‹ä¸Šä¸€ä¸ªåˆ†ç‰‡, bookID, noteID, point, prog.settings.btnDeleteBack)} -->
            {#if getProgressivePluginConfig().btnDeleteBack}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.åˆ é™¤åˆ†ç‰‡çœ‹ä¸Šä¸€ä¸ªåˆ†ç‰‡}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.deleteAndBack,
                            $point,
                        );
                    }}>â¬…ğŸ—‘</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.deleteAndNext, "ğŸ—‘â¡", tomatoI18n.åˆ é™¤åˆ†ç‰‡çœ‹ä¸‹ä¸€ä¸ªåˆ†ç‰‡, bookID, noteID, point, prog.settings.btnDeleteNext)} -->
            {#if getProgressivePluginConfig().btnDeleteNext}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.åˆ é™¤åˆ†ç‰‡çœ‹ä¸‹ä¸€ä¸ªåˆ†ç‰‡}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.deleteAndNext,
                            $point,
                        );
                    }}>ğŸ—‘â¡</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.AddDocCard, "ï¼‹ğŸ—ƒ", tomatoI18n.å°†æ–‡æ¡£åŠ å…¥é—ªå¡, bookID, noteID, point, prog.settings.btnSaveCard)} -->
            {#if getProgressivePluginConfig().btnSaveCard}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.å°†æ–‡æ¡£åŠ å…¥é—ªå¡}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.AddDocCard,
                            $point,
                        );
                    }}>ï¼‹ğŸ—ƒ</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.DelDocCard, "ï¼ğŸ—ƒ", tomatoI18n.åˆ é™¤æ–‡æ¡£é—ªå¡, bookID, noteID, point, prog.settings.btnDelCard)} -->
            {#if getProgressivePluginConfig().btnDelCard}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.åˆ é™¤æ–‡æ¡£é—ªå¡}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.DelDocCard,
                            $point,
                        );
                    }}>ï¼ğŸ—ƒ</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.deleteAndExit, "ğŸ—‘ğŸ•º", tomatoI18n.åˆ é™¤åˆ†ç‰‡å¹¶é€€å‡º, bookID, noteID, point, prog.settings.btnDeleteExit)} -->
            {#if getProgressivePluginConfig().btnDeleteExit}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.åˆ é™¤åˆ†ç‰‡å¹¶é€€å‡º}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.deleteAndExit,
                            $point,
                        );
                    }}>ğŸ—‘ğŸ•º</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.ignoreBook, "ğŸš«", tomatoI18n.ä¸å†æ¨é€æœ¬ä¹¦, bookID, noteID, point, prog.settings.btnIgnoreBook)} -->
            {#if getProgressivePluginConfig().btnIgnoreBook}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.ä¸å†æ¨é€æœ¬ä¹¦}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.ignoreBook,
                            $point,
                        );
                    }}>ğŸš«</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.splitByPunctuations, "âœ‚ğŸ“œğŸ‘‘", tomatoI18n.æŒ‰æ ‡ç‚¹æ–­å¥ + "VIP", bookID, noteID, point, prog.settings.btnSplitByPunctuations)} -->
            {#if getProgressivePluginConfig().btnSplitByPunctuations}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.æŒ‰æ ‡ç‚¹æ–­å¥ + "VIP"}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.splitByPunctuations,
                            $point,
                        );
                    }}>âœ‚ğŸ“œ</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.splitByPunctuationsListCheck, "âœ‚âœ…ğŸ‘‘", tomatoI18n.æŒ‰æ ‡ç‚¹æ–­å¥Checkbox + "VIP", bookID, noteID, point, prog.settings.btnSplitByPunctuationsListCheck)} -->
            {#if getProgressivePluginConfig().btnSplitByPunctuationsListCheck}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.æŒ‰æ ‡ç‚¹æ–­å¥Checkbox + "VIP"}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.splitByPunctuationsListCheck,
                            $point,
                        );
                    }}>âœ‚âœ…ğŸ‘‘</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.splitByPunctuationsList, "âœ‚ğŸ“ŒğŸ‘‘", tomatoI18n.æŒ‰æ ‡ç‚¹æ–­å¥åˆ—è¡¨ + "VIP", bookID, noteID, point, prog.settings.btnSplitByPunctuationsList)} -->
            {#if getProgressivePluginConfig().btnSplitByPunctuationsList}
                <button
                    title={`ã€Š${$title}ã€‹${tomatoI18n.æŒ‰æ ‡ç‚¹æ–­å¥åˆ—è¡¨ + "VIP"}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.splitByPunctuationsList,
                            $point,
                        );
                    }}>âœ‚ğŸ“ŒğŸ‘‘</button
                >
            {/if}
        </div>
    {/snippet}
</DialogSvelte>

<style>
    .container {
        flex: auto;
    }
</style>
