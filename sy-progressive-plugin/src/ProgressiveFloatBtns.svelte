<script lang="ts">
    import DialogSvelte from "../../sy-tomato-plugin/src/libs/DialogSvelte.svelte";
    import { Writable } from "svelte/store";
    import { tomatoI18n } from "../../sy-tomato-plugin/src/tomatoI18n";
    import { getProgressivePluginConfig } from "../../sy-tomato-plugin/src/libs/utils";
    import { prog } from "./Progressive";
    import { HtmlCBType } from "./constants";

    interface PropsType {
        zIndexPlus: Writable<boolean>;
        show: Writable<boolean>;
        title: Writable<string>;
        point: Writable<number>;
        noteID: Writable<string>;
        bookID: Writable<string>;
    }
    let { zIndexPlus, show, title, point, noteID, bookID }: PropsType =
        $props();
</script>

<DialogSvelte
    show={$show}
    title={$title}
    savePositionKey="ProgressiveFloatBtns 2025-07-16 00:06:03"
    isProgressive={true}
    zIndexPlus={$zIndexPlus}
>
    {#snippet dialogInner()}
        <div class="container" title={tomatoI18n.Â¶ÇÊûúÊó†Ê≥ïÊãñÂä®}>
            <!-- ${btn(HtmlCBType.viewContents, "üìú", tomatoI18n.ÊâìÂºÄÁõÆÂΩï, bookID, noteID, point, prog.settings.btnViewContents)} -->
            {#if getProgressivePluginConfig().btnViewContents}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.ÊâìÂºÄÁõÆÂΩï}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.viewContents,
                            $point,
                        );
                    }}>üìú</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.previous, "‚¨Ö", tomatoI18n.‰∏ä‰∏Ä‰∏™ÂàÜÁâá, bookID, noteID, point, prog.settings.btnPrevious)} -->
            {#if getProgressivePluginConfig().btnPrevious}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.‰∏ä‰∏Ä‰∏™ÂàÜÁâá}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.previous,
                            $point,
                        );
                    }}>‚¨Ö</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.next, "‚û°", tomatoI18n.‰∏ã‰∏Ä‰∏™ÂàÜÁâá, bookID, noteID, point, prog.settings.btnNext)} -->
            {#if getProgressivePluginConfig().btnNext}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.‰∏ã‰∏Ä‰∏™ÂàÜÁâá}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.next,
                            $point,
                        );
                    }}>‚û°</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.cleanOriginText, "üßπ", tomatoI18n.Âà†Èô§ÂéüÊñá, bookID, noteID, point, prog.settings.btnCleanOriginText)} -->
            {#if getProgressivePluginConfig().btnCleanOriginText}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.Âà†Èô§ÂéüÊñá}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.cleanOriginText,
                            $point,
                        );
                    }}>üßπ</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.fullfilContent, "‚¨á", tomatoI18n.ÈáçÊñ∞ÊèíÂÖ•ÂàÜÁâáÂÜÖÂÆπ, bookID, noteID, point, prog.settings.btnFullfilContent)} -->
            {#if getProgressivePluginConfig().btnFullfilContent}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.ÈáçÊñ∞ÊèíÂÖ•ÂàÜÁâáÂÜÖÂÆπ}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.fullfilContent,
                            $point,
                        );
                    }}>‚¨á</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.quit, "üï∫", tomatoI18n.ÂÖ≥Èó≠ÂàÜÁâá, bookID, noteID, point, prog.settings.btnStop)} -->
            {#if getProgressivePluginConfig().btnStop}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.ÂÖ≥Èó≠ÂàÜÁâá}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.quit,
                            $point,
                        );
                    }}>üï∫</button
                >
            {/if}
            <!-- ${btn(HtmlCBType.nextBook, "üìöüìñ", tomatoI18n.Êç¢‰∏ÄÊú¨‰π¶Áúã, bookID, noteID, point, prog.settings.btnNextBook)} -->
            {#if getProgressivePluginConfig().btnNextBook}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.Êç¢‰∏ÄÊú¨‰π¶Áúã}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.nextBook,
                            $point,
                        );
                    }}>üìöüìñ</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.openFlashcardTab, "‚ö°", tomatoI18n.ÊâìÂºÄÊú¨‰π¶ÁöÑÈó™Âç°, bookID, noteID, point, prog.settings.btnOpenFlashcardTab)} -->
            {#if getProgressivePluginConfig().btnOpenFlashcardTab}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.ÊâìÂºÄÊú¨‰π¶ÁöÑÈó™Âç°}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.openFlashcardTab,
                            $point,
                        );
                    }}>‚ö°</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.deleteAndBack, "‚¨Öüóë", tomatoI18n.Âà†Èô§ÂàÜÁâáÁúã‰∏ä‰∏Ä‰∏™ÂàÜÁâá, bookID, noteID, point, prog.settings.btnDeleteBack)} -->
            {#if getProgressivePluginConfig().btnDeleteBack}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.Âà†Èô§ÂàÜÁâáÁúã‰∏ä‰∏Ä‰∏™ÂàÜÁâá}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.deleteAndBack,
                            $point,
                        );
                    }}>‚¨Öüóë</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.deleteAndNext, "üóë‚û°", tomatoI18n.Âà†Èô§ÂàÜÁâáÁúã‰∏ã‰∏Ä‰∏™ÂàÜÁâá, bookID, noteID, point, prog.settings.btnDeleteNext)} -->
            {#if getProgressivePluginConfig().btnDeleteNext}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.Âà†Èô§ÂàÜÁâáÁúã‰∏ã‰∏Ä‰∏™ÂàÜÁâá}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.deleteAndNext,
                            $point,
                        );
                    }}>üóë‚û°</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.AddDocCard, "ÔºãüóÉ", tomatoI18n.Â∞ÜÊñáÊ°£Âä†ÂÖ•Èó™Âç°, bookID, noteID, point, prog.settings.btnSaveCard)} -->
            {#if getProgressivePluginConfig().btnSaveCard}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.Â∞ÜÊñáÊ°£Âä†ÂÖ•Èó™Âç°}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.AddDocCard,
                            $point,
                        );
                    }}>ÔºãüóÉ</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.DelDocCard, "ÔºçüóÉ", tomatoI18n.Âà†Èô§ÊñáÊ°£Èó™Âç°, bookID, noteID, point, prog.settings.btnDelCard)} -->
            {#if getProgressivePluginConfig().btnDelCard}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.Âà†Èô§ÊñáÊ°£Èó™Âç°}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.DelDocCard,
                            $point,
                        );
                    }}>ÔºçüóÉ</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.deleteAndExit, "üóëüï∫", tomatoI18n.Âà†Èô§ÂàÜÁâáÂπ∂ÈÄÄÂá∫, bookID, noteID, point, prog.settings.btnDeleteExit)} -->
            {#if getProgressivePluginConfig().btnDeleteExit}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.Âà†Èô§ÂàÜÁâáÂπ∂ÈÄÄÂá∫}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.deleteAndExit,
                            $point,
                        );
                    }}>üóëüï∫</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.ignoreBook, "üö´", tomatoI18n.‰∏çÂÜçÊé®ÈÄÅÊú¨‰π¶, bookID, noteID, point, prog.settings.btnIgnoreBook)} -->
            {#if getProgressivePluginConfig().btnIgnoreBook}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.‰∏çÂÜçÊé®ÈÄÅÊú¨‰π¶}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.ignoreBook,
                            $point,
                        );
                    }}>üö´</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.splitByPunctuations, "‚úÇüìúüëë", tomatoI18n.ÊåâÊ†áÁÇπÊñ≠Âè• + "VIP", bookID, noteID, point, prog.settings.btnSplitByPunctuations)} -->
            {#if getProgressivePluginConfig().btnSplitByPunctuations}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.ÊåâÊ†áÁÇπÊñ≠Âè• + "VIP"}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.splitByPunctuations,
                            $point,
                        );
                    }}>‚úÇüìú</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.splitByPunctuationsListCheck, "‚úÇ‚úÖüëë", tomatoI18n.ÊåâÊ†áÁÇπÊñ≠Âè•Checkbox + "VIP", bookID, noteID, point, prog.settings.btnSplitByPunctuationsListCheck)} -->
            {#if getProgressivePluginConfig().btnSplitByPunctuationsListCheck}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.ÊåâÊ†áÁÇπÊñ≠Âè•Checkbox + "VIP"}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.splitByPunctuationsListCheck,
                            $point,
                        );
                    }}>‚úÇ‚úÖüëë</button
                >
            {/if}

            <!-- ${btn(HtmlCBType.splitByPunctuationsList, "‚úÇüìåüëë", tomatoI18n.ÊåâÊ†áÁÇπÊñ≠Âè•ÂàóË°® + "VIP", bookID, noteID, point, prog.settings.btnSplitByPunctuationsList)} -->
            {#if getProgressivePluginConfig().btnSplitByPunctuationsList}
                <button
                    title={`„Ää${$title}„Äã${tomatoI18n.ÊåâÊ†áÁÇπÊñ≠Âè•ÂàóË°® + "VIP"}`}
                    class="b3-button b3-button--outline tomato-button"
                    onclick={() => {
                        prog.htmlBlockReadNextPeice(
                            $bookID,
                            $noteID,
                            HtmlCBType.splitByPunctuationsList,
                            $point,
                        );
                    }}>‚úÇüìåüëë</button
                >
            {/if}
        </div>
    {/snippet}
</DialogSvelte>

<style>
    .container {
        flex: auto;
    }
</style>
